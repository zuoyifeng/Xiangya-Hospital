<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>中南大学湘雅医院皮肤疾病与健康移动互联体</title>
    <link href="../../css/reset.css" rel="stylesheet">
    <link href="../../css/main.css" rel="stylesheet">
    <link href="../../fonts/font-awesome.min.css" rel="stylesheet"/>
    <!--[if lt IE 9]>
    <script src="../../js/html5shiv.min.js"></script>
    <script src="../../js/respond.min.js"></script>
    <script src="../../js/css3-mediaqueries.js"></script>
    <![endif]-->
</head>
<body class="usercolumn">

<header class="meta-header">
    <div class="head_top">
        <div class="container">
            <div class="head_logo">
                <a href="../../index.html">
                    <img src="../../imgs/logo.png"/>
                </a>

            </div>
            <div class="head_tool" id="headAccount"></div>
        </div>
    </div>
    <div class="head_menu">
        <ul class="container clearfix" id="nav"></ul>
    </div>
</header>
<div class="container">
    <div class="ya-myworkbench-box clearfix">
        <div class="ya-boxLeft">
            <div class="menu_left">
                <span>我的工作台</span>
            </div>
            <ul>
                <!--<li class="active"><a href="dashboard.html">工作台总览</a></li>-->
                <li class="active"><a href="todolist.html">医务工作台</a></li>

            </ul>
        </div>
        <div class="ya-boxRight">
            <!--待办事项-->
            <div class="ya-todoList ya-medicalwork">
                <h3>
                    医务工作台
                </h3>
                <ul id="progressBar">

                    <!--<li>-->
                        <!--<span class="meta-list-tag color-consul">徐一</span>-->
                        <!--<div class="progressbox" style="display: flex;">-->
                            <!--<div class="progress-step startstep">-->
                                <!--<div class="circle"></div>-->
                                <!--<span>1</span>-->
                                <!--<p>同意转诊</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>2</span>-->
                                <!--<p>短信通知</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>3</span>-->
                                <!--<p>医生就诊</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>4</span>-->
                                <!--<p>就诊结果</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step endstep">-->
                                <!--<span>5</span>-->
                                <!--<p>平台随访</p>-->
                                <!--<div class="circle"></div>-->
                            <!--</div>-->
                            <!--<div class="progress" style="width: 0%;">-->

                            <!--</div>-->
                            <!--<span class="next-step" data-step="1">下一步</span>-->
                        <!--</div>-->

                    <!--</li>-->
                    <!--<li>-->
                        <!--<span class="meta-list-tag color-consul">张静晶</span>-->
                        <!--<div class="progressbox" style="display: flex;">-->
                            <!--<div class="progress-step startstep">-->
                                <!--<div class="circle"></div>-->
                                <!--<span>1</span>-->
                                <!--<p>同意转诊</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>2</span>-->
                                <!--<p>短信通知</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>3</span>-->
                                <!--<p>医生就诊</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>4</span>-->
                                <!--<p>就诊结果</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step endstep">-->
                                <!--<span>5</span>-->
                                <!--<p>平台随访</p>-->
                                <!--<div class="circle"></div>-->
                            <!--</div>-->
                            <!--<div class="progress" style="width: 0%;">-->

                            <!--</div>-->
                            <!--<span class="next-step" data-step="1">下一步</span>-->
                        <!--</div>-->

                    <!--</li>-->
                    <!--<li>-->
                        <!--<span class="meta-list-tag color-consul">黎明明</span>-->
                        <!--<div class="progressbox" style="display: flex;">-->
                            <!--<div class="progress-step startstep">-->
                                <!--<div class="circle"></div>-->
                                <!--<span>1</span>-->
                                <!--<p>同意转诊</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>2</span>-->
                                <!--<p>短信通知</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>3</span>-->
                                <!--<p>医生就诊</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>4</span>-->
                                <!--<p>就诊结果</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step endstep">-->
                                <!--<span>5</span>-->
                                <!--<p>平台随访</p>-->
                                <!--<div class="circle"></div>-->
                            <!--</div>-->
                            <!--<div class="progress" style="width: 0%;">-->

                            <!--</div>-->
                            <!--<span class="next-step" data-step="1">下一步</span>-->
                        <!--</div>-->

                    <!--</li>-->
                    <!--<li>-->
                        <!--<span class="meta-list-tag color-consul">王林林</span>-->
                        <!--<div class="progressbox" style="display: flex;">-->
                            <!--<div class="progress-step startstep">-->
                                <!--<div class="circle"></div>-->
                                <!--<span>1</span>-->
                                <!--<p>同意转诊</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>2</span>-->
                                <!--<p>短信通知</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>3</span>-->
                                <!--<p>医生就诊</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step">-->
                                <!--<span>4</span>-->
                                <!--<p>就诊结果</p>-->
                            <!--</div>-->
                            <!--<div class="progress-step endstep">-->
                                <!--<span>5</span>-->
                                <!--<p>平台随访</p>-->
                                <!--<div class="circle"></div>-->
                            <!--</div>-->
                            <!--<div class="progress" style="width: 0%;">-->

                            <!--</div>-->
                            <!--<span class="next-step" data-step="1">下一步</span>-->
                        <!--</div>-->
                    <!--</li>-->
                </ul>
            </div>
            <div class="et-page">
                <div class="et-pagenum">
                    共<span id="pageCont"></span>条记录，每页展示
                    <select class="form-control" id="pageSelect">
                        <option value="10">10</option>
                        <option value="20">20</option>
                        <option value="30">30</option>
                    </select>条
                </div>
                <div class="et-pagego">
                    <span class="et-pagetotal" id="pageNum"></span>
                    跳至第<input class="form-control" type="text" id="pageindex" value="1"
                              onkeyup="value=value.replace(/[^\d]/g,'')"
                              onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))"/>页
                    <span class="btnGoPage" id="goPage">GO</span>
                </div>
                <ul class="pagination" id="pagePaging"></ul>
            </div>
        </div>
    </div>
</div>

<footer class="meta-footer">
    <div class="container">
        <div class="meta-copyright" id="footerBox">
            <div class="meta-sitemap">
                <a title="中国政府网_中央人民政府门户网站" href="http://www.gov.cn/">中国政府网</a>
                <a title="中华人民共和国国家卫生和计划生育委员会" href="http://www.nhfpc.gov.cn/">中华人民共和国国家卫生和计划生育委员会</a>
                <a title="湖南卫生和计划生育委员会" href="http://wjw.hunan.gov.cn/">湖南卫生和计划生育委员会</a>
                <a title="国家医学考试网" href="http://www.nmec.org.cn/">国家医学考试网</a>
                <a title="丁香园_中国医疗领域的连接者" href="http://www.dxy.cn/">丁香园</a>
                <a title="中南大学" href="http://www.csu.edu.cn/">中南大学</a>
                <a title="中南大学湘雅医院" href="http://www.xiangya.com.cn/">中南大学湘雅医院</a>
                <a title="中南大学湘雅二医院" href="http://www.xyeyy.com/">中南大学湘雅二医院</a>
                <a title="中南大学湘雅三医院" href="http://www.xy3yy.com/">中南大学湘雅三医院</a>
                <a title="湘雅海外校友会" href="http://www.xyoaa.org/">湘雅海外校友会</a>
            </div>
            <div class="meta-siteinfo">
                <img class="logo_bottom" src="../../imgs/logo_hack.png"/>
                <p>
                    通讯地址：中国湖南长沙市湘雅路87号<br>
                    座机电话：0731-89753406 <br>
                    移动电话：13080564083
                </p>
                <p>湘ICP备09002748号 Copyright 2007-2017 版权申明 | 联系我们 | 网站地图 </p>
                <div class="img_code">
                    <div>
                        <span>湘雅皮肤医生</span>
                        <img src="../../imgs/code.jpg"/>
                    </div>
                    <div>
                        <span>湘雅皮肤医联体</span>
                        <img src="../../imgs/code.jpg"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

<script src="../../js/jquery.min.js"></script>
<script src="../../js/jqPaginator.min.js"></script>
<script src="../../js/common.js"></script>
<script>
//    $(function () {
//        //第一个进度条
//        $('#nextStepOne').click(function () {
//            nextStepOne();
//        })
//        //第二个进度条
//        $('#nextStepTwo').click(function () {
//            nextStepTwo();
//        })
//        //第三个进度条
//        $('#nextStepThree').click(function () {
//            nextStepThree();
//        })
//        //第四个进度条
//        $('#nextStepFour').click(function () {
//            nextStepFour();
//        })
//        //第五个进度条
//        $('#nextStepFive').click(function () {
//            nextStepFive();
//        })
//        //定义每个进度条初始的状态
//        var stepone=0,
//         steptwo=2,
//        stepthree=3,
//        stepfour=4,
//        stepfive=1;
//        //每个进度条的调用方法
////        function nextStep() {
////            step++;
////            if (step>=5) {
////                step =5;
////                $('.next-step').html('完成');
////            }
////            setLoading(step,'#stepOne .progress-step');
////        }
//        function nextStepOne() {
//            stepone++;
//            if (stepone>=5) {
//                stepone =5;
//                $('#nextStepOne').html('完成');
//            }
//            setLoading(stepone,'#stepOne .progress-step');
//        }
//        function nextStepTwo() {
//            steptwo++;
//            if (steptwo>=5) {
//                steptwo = 5;
//                $('#nextStepTwo').html('完成');
//            }
//            setLoading(steptwo,'#stepTwo .progress-step');
//        }
//        function nextStepThree() {
//            stepthree++;
//            if (stepthree>=5) {
//                stepthree = 5;
//                $('#nextStepThree').html('完成');
//            }
//            setLoading(stepthree,'#stepThree .progress-step');
//        }
//        function nextStepFour() {
//            stepfour++;
//            if (stepfour>=5) {
//                stepfour = 5;
//                $('#nextStepFour').html('完成');
//            }
//            setLoading(stepfour,'#stepFour .progress-step');
//        }
//        function nextStepFive() {
//            stepfive++;
//            if (stepfive>=5) {
//                stepfive = 5;
//                $('#nextStepFive').html('完成');
//            }
//            setLoading(stepfive,'#stepFive .progress-step');
//        }
//        //封装进度条
//        function setLoading(step,selector) {
//            var stepList = document.querySelectorAll(selector);
//            stepList.forEach( function (element, index) {
//                console.log(element);
//                var dataStep = $(element).attr('data-step');
//                console.log(dataStep);
//                if (dataStep <= step) {
//                    $(element).addClass('active');
//                } else {
//                    $(element).removeClass('active');
//                }
//            })
//
//        }
//
//    })
    $(function () {
        //模拟json数据
        var progressList={
            "status": true,
            "message": "查询成功",
            "data": {
                "totals": 5,
                "list": [
                    {
                        "userId": 001,
                        "userName": "许西",
                        "progress": "3"
                    },
                    {
                        "userId": 002,
                        "userName": "徐一",
                        "progress": "2"
                    },
                    {
                        "userId": 003,
                        "userName": "张静晶",
                        "progress": "1"
                    },
                    {
                        "userId": 004,
                        "userName": "黎明明",
                        "progress": "4"
                    },
                    {
                        "userId": 005,
                        "userName": "王丽丽",
                        "progress": "5"
                    }
                ]
            }
        }
        for(var i=0;i<progressList.data.list.length;i++){
            var stepLength=progressList.data.list.length;
            var nowstep=progressList.data.list[i].progress;
            var userName=progressList.data.list[i].userName;
            var html='<li>'+
                '<span class="meta-list-tag color-consul">'+userName+'</span>'+
                '<div class="progressbox"  data-nowstep="'+nowstep+'">'+
                '<div class="progress-step startstep">'+
                '<div class="circle"></div>'+
                '<span>1</span>'+
                '<p>同意转诊</p>'+
               ' </div>'+
               ' <div class="progress-step">'+
                '<span>2</span>'+
                '<p>短信通知</p>'+
                '</div>'+
                '<div class="progress-step">'+
                '<span>3</span>'+
                '<p>医生就诊</p>'+
                '</div>'+
                '<div class="progress-step">'+
                '<span>4</span>'+
                '<p>就诊结果</p>'+
                '</div>'+
                '<div class="progress-step endstep">'+
                '<span>5</span>'+
                '<p>平台随访</p>'+
                '<div class="circle"></div>'+
                '</div>'+
                '<div class="progress" style="width: 0%;">'+
                '</div>'+
                '<span class="next-step" data-step='+nowstep+'>下一步</span>'+
                '</div>'+
                '</li>';
            $('#progressBar').append(html);
            if(parseInt(nowstep)>=1 && parseInt(nowstep)<stepLength){
                $(".progressbox[data-nowstep=" + nowstep + "]").find('.progress-step:nth-child(-n+'+nowstep+')').addClass('active').parents('.progressbox').find('.progress').css({'width':'10'*(2*nowstep-1)+'%','background':'#00dd69'});

            }else if(parseInt(nowstep)==stepLength){
                $(".progressbox[data-nowstep=" + stepLength + "]").find('.progress').css({'width':'100%','background':'#00dd69'}).parents('.progressbox').find('.progress-step:nth-child(-n+'+stepLength+')').addClass('active').parents('.progressbox').find('.next-step').html('完成');
            }
        }
        $('.next-step').click(function () {
            var step=parseInt($(this).attr('data-step'));
            step++;
            console.log(step);
            if(step>=1&&step<=4) {
                $(this).parent().find('.progress').css('width','10'*(2*step-1)+'%');
                $(this).parent().find('.progress-step:nth-child(-n'+(step)+')').addClass('active');
            }else if(step>4){
                $(this).parent().find('.progress').css('width','100%');
                $(this).parent().find('.progress-step:nth-child(-n+5)').addClass('active');
                $(this).html('完成');
                $(this).attr('data-step',5);
            }
            $(this).attr('data-step',step);
        })


    })

</script>
</body>
</html>